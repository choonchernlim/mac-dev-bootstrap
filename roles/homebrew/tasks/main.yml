---
- name: Update Homebrew and upgrade all existing packages
  homebrew:
    update_homebrew: yes
    upgrade_all: yes

- name: Tap homebrew/cask-fonts for installing Nerd Fonts
  homebrew_tap:
    name: homebrew/cask-fonts
    state: present

# homebrew_cask doesn't work with tapped repo... so, run the command directly
- name: Installing Nerd Fonts
  shell: brew install --cask font-hack-nerd-font
  register: result
  changed_when: not 'is already installed' in result.stderr

- name: Install cask packages
  homebrew_cask:
    name: '{{ item }}'
    state: present
  loop: '{{ homebrew_cask_packages }}'

- name: Install packages
  homebrew:
    name: '{{ item }}'
    state: present
  loop: '{{ homebrew_packages }}'
